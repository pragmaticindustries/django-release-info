{% load static %}

{% block customjs %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const expandableRows = document.querySelectorAll(".expandable-row");
    
        expandableRows.forEach(row => {
            row.addEventListener("click", function () {
                const detailRow = this.nextElementSibling;
    
                if (detailRow && detailRow.classList.contains("detail-row")) {
                    if (detailRow.classList.contains("hidden")) {
                        detailRow.classList.remove("hidden");
                    } else {
                        detailRow.classList.add("hidden");
                    }
                }
            });
        });
    });
</script>
{% endblock %}

<style>
    {% block font %}
        {% if info.fonts %}
                @font-face {font-family: '{{ info.fonts.header.name }}'; src: url({% static info.fonts.header.url %});}
                @font-face {font-family: '{{ info.fonts.content.name }}'; src: url({% static info.fonts.content.url %});}
        {% endif %}
    {% endblock font %}
    
    #release {
        color: #202124;
        letter-spacing: 0.025em;
        max-width: 40rem;
        padding: 3rem 2rem;
        font-size: 0.75rem;
        margin: auto;
        overflow: auto;
        height: 100%;
        font-family: '{{info.fonts.content.name}}';
        
        h1 {font-family: '{{info.fonts.header.name}}'; font-size: xx-large; padding-top: 3rem; margin: 0; font-weight: normal;}
        p {color: #9CA3AF; padding-top: 0.5rem;}
        a {color: #2FA8E1; padding: 0.25rem 0; position: relative;}
        a:hover {background-color: #2FA8E1; color: #2FA8E1; text-decoration: none; cursor: pointer; fill: #2FA8E1;}
        
        table {width: 100%; margin-top: 3rem; font-size: 0.75rem; border-collapse: collapse;}
        tbody {border-bottom: 1px solid rgb(229, 231, 235);}
        tr {cursor: pointer;}
        th {font-family: '{{ info.fonts.header.name }}'; text-align: left; padding: 0.75rem; color: #9CA3AF; letter-spacing: 0.15em; text-transform: uppercase;}
        td {text-align: left; padding: 0.75rem;}

        .expandable-row:hover {cursor: pointer; color: #2FA8E1; user-select: none;}
        .detail-row > td > div {background: #F4F4F4; padding: 0.5rem 0; max-width: 35rem; line-height: 2; white-space: pre-wrap; margin: -1rem 0rem 1rem 0.5rem;}
        .hidden {display: none;}

        .top-bar {padding-bottom: 2rem;}
        .top-bar > a {text-decoration: none; height: 1.5rem; display: flex; align-items: center;}
        .logo {border-bottom: 1px solid rgb(229, 231, 235);}
        .logo img {height: 2.5rem;}

        .blubb {right: 0; top: 50%; z-index: -10; transform: translateY(-50%); transition-duration: 500ms; position: absolute; fill: none;}
        a:hover > span{transform: translateX(60px) translateY(-50%) rotate(360deg); fill: #202124;}
    }
</style>
{% block content %}


<div id="release">
    <div class="top-bar">
        <a href="/">
            <svg style="height: 1rem;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M15 239c-9.4 9.4-9.4 24.6 0 33.9L207 465c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L65.9 256 241 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L15 239z"/></svg>
        </a>
    </div>

    {% if info.picture_path %}
    <div class="logo">
        <img src="{% static info.picture_path %}" alt="company logo">
    </div>
    {% endif %}

    <h1>Release updates</h1>
    <span>{{info.product_name}}</span>
    <span>by</span>
    <a  href="{{info.author_url}}" target="_blank">{{info.author}}</a>
    {% if info.contact_email %}
        <span>|</span>
        <a  href="mailto:{{ info.contact_email }}">
            {{ info.contact_text|default:info.contact_email }}
            <span class="blubb">
                <svg style="height: 20px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Pro 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M170.8 204.1l22.1-14.7c4.5-3 7.1-8 7.1-13.3l0-8c0-13.3-10.7-24-24-24l-32 0c-13.3 0-24 10.7-24 24l0 8c0 5.3 2.7 10.3 7.1 13.3l22.1 14.7-8.4 6.3C129 219.2 114.7 224 100 224c-37.6 0-68-30.4-68-68l0-20c0-48.6 39.4-88 88-88l80 0c48.6 0 88 39.4 88 88l0 20c0 37.6-30.4 68-68 68c-14.7 0-29-4.8-40.8-13.6l-8.4-6.3zM160 216l9.6 7.2C184.1 234.1 201.8 240 220 240c16.2 0 31.3-4.6 44.1-12.5c1.8 29.3 26.1 52.5 55.9 52.5l77.4 0c-22.6 15.9-37.4 42.2-37.4 72l-104 0c5-6.7 8-15 8-24c0-22.1-17.9-40-40-40l-120 0c-30.9 0-56-25.1-56-56l0-10c14.3 11.3 32.4 18 52 18c18.2 0 35.9-5.9 50.4-16.8L160 216zm200-56c-22.6 0-43.3 7.8-59.7 20.8c2.4-7.9 3.7-16.2 3.7-24.8l0-20c0-2.7-.1-5.4-.3-8l8.3 0c4.4 0 8-3.6 8-8s-3.6-8-8-8l-10.8 0c-10.8-45.9-52-80-101.2-80l-80 0C70.8 32 29.6 66.1 18.8 112L8 112c-4.4 0-8 3.6-8 8s3.6 8 8 8l8.3 0c-.2 2.6-.3 5.3-.3 8l0 20c0 18.4 5.9 35.5 16 49.3L32 216l0 16 0 26.9C32 381 131 480 253.1 480l163.8 0C540.1 480 640 380.1 640 256.9c0-84.4-56.5-158.4-138-180.6l-43.9-12c-3.7-1-7.6 .7-9.3 4.2s-.7 7.6 2.3 9.9l66.3 51c21.8 16.8 34.6 42.7 34.6 70.2c0 20.3-9.4 38.4-24 50.2l0-41.7c0-8.8-3.6-17.1-9.7-22.5c-6.3-5.6-15.1-8.2-24.4-5C465.3 190.4 440 216.1 440 248l0 16-96 0 0-8c0-8.8 7.2-16 16-16l8 0c22.1 0 40-17.9 40-40s-17.9-40-40-40l-8 0zm-77.8 77.2c8.5-35.1 40.1-61.2 77.8-61.2l8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-8 0c-17.7 0-32 14.3-32 32l0 8-8 0c-17.5 0-32.3-11.2-37.8-26.8zM512 335.1c0 18.1-8.7 35.1-23.4 45.6l-29.2 20.9c-3.6 2.6-4.4 7.6-1.9 11.2s7.6 4.4 11.2 1.9l29.2-20.9c18.9-13.5 30.2-35.3 30.2-58.6l0-66c23.9-13.9 40-39.9 40-69.6c0-32.5-15.1-63.1-40.8-82.9L493 90.4l4.8 1.3C572.3 112 624 179.7 624 256.9C624 371.3 531.3 464 416.9 464l-163.8 0C146.4 464 58.7 382.5 48.9 278.4C62.1 294 81.9 304 104 304l120 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-16 0-48 0c-4.4 0-8 3.6-8 8s3.6 8 8 8l48 0 16 0 144 0c4.4 0 8-3.6 8-8l0-8c0-39.7 32.1-71.8 71.7-72l.3 0s0 0 0 0c4.4 0 8-3.6 8-8l0-24c0-23 18.8-44 43.1-52.4c3.3-1.1 6.2-.4 8.5 1.8c2.5 2.3 4.4 6.1 4.4 10.6l0 51.2 0 17 0 58.8zM112 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm112 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32zm-88 16l0-8c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 8-24 16-24-16z"/></svg>
            </span>
        </a>
    {% endif %}
    {% if version %}
    <p>v{{ version }} released on {{ release_date }}</p>
    {% endif %}

    <div>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th style="width:30%">Version</th>
                </tr>
            </thead>
            {{ changelog|safe }}
        </table>
   </div>
</div>
{% endblock %}
